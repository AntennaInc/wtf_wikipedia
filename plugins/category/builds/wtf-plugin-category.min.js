!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).wtfCategory=n()}(this,(function(){"use strict";function t(t,n,e,r,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void e(t)}a.done?n(c):Promise.resolve(c).then(r,o)}function n(n){return function(){var e=this,r=arguments;return new Promise((function(o,i){var u=n.apply(e,r);function a(n){t(u,o,i,a,c,"next",n)}function c(n){t(u,o,i,a,c,"throw",n)}a(void 0)}))}}var e=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return new Promise((function(r,o){if(t&&n)if(0!==t.length)for(var i=[],u=e-1,a=0,c=function e(c){a+=1;var f=n(t[c]);f.then?(f.then((function(t){i[c]=t})),f.catch((function(t){console.error(t),i[c]=null})),f.finally((function(){a-=1,u+=1,t.length>=u+1?e(u):a<=0&&r(i)}))):o("Error: function must return a promise")},f=t.length<e?t.length:e,s=0;s<f;s+=1)c(s);else r([]);else o("Error: missing required parameters to rate-limit function")}))},r={one:function(t,n){return e(t,n,1)},two:function(t,n){return e(t,n,2)},three:function(t,n){return e(t,n,3)},four:function(t,n){return e(t,n,4)},five:function(t,n){return e(t,n,5)},ten:function(t,n){return e(t,n,10)},fifteen:function(t,n){return e(t,n,15)}};r.serial=r.one,r.linear=r.one,r.crawl=r.three,r.walk=r.five,r.run=r.ten,r.sprint=r.fifteen;var o=r,i={lang:"en",wiki:"wikipedia",domain:null,path:"w/api.php"},u=function(t,n,e){var r;n=n||{},n=Object.assign({},i,n),"string"==typeof t?n.lang=t:(r=t)&&"[object Object]"===Object.prototype.toString.call(r)&&(n=Object.assign(n,t));var o="https://".concat(n.lang,".wikipedia.org/").concat(n.path,"?");return n.domain&&(o="https://".concat(n.domain,"/").concat(n.path,"?")),e(o+="format=json&action=query&generator=random&grnnamespace=14&prop=revisions&grnlimit=1&origin=*").then((function(t){try{var n=t.query.pages;return n[Object.keys(n)[0]].title}catch(t){throw t}})).catch((function(t){return console.error(t),null}))};var a,c=(a=Object.freeze({__proto__:null,default:o}))&&a.default||a,f=function(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=[];for(n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},s=function(){var t=n(regeneratorRuntime.mark((function t(n,e,r,o){var i,u,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",{docs:[],categories:[]});case 2:return t.next=4,n.category(e,r);case 4:return i=t.sent,u=i.pages.map((function(t){return t.title})),a=f(u),s=function(t){return n.fetch(t,o)},t.abrupt("return",c.three(a,s).then((function(t){return{docs:[].concat.apply([],t),categories:i.categories}})));case 9:case"end":return t.stop()}}),t)})));return function(n,e,r,o){return t.apply(this,arguments)}}();return function(t){t.wtf.parseCategory=function(){var e=n(regeneratorRuntime.mark((function n(e,r,o){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s(t.wtf,e,r,o);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.wtf.randomCategory=function(){var e=n(regeneratorRuntime.mark((function n(e,r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u(e,r,t.http);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(t,n){return e.apply(this,arguments)}}(),t.wtf.fetchCategory=t.wtf.parseCategory}}));
