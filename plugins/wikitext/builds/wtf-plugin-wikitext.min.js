!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).wtf=e()}(this,(function(){"use strict";var t={images:!0,tables:!0,infoboxes:!0,categories:!0,lists:!0,links:!0,paragraphs:!0},e=function(e){e=e||{},e=Object.assign({},t,e);var n="";if(!0===this.isRedirect())return"#REDIRECT [[".concat(this.redirectTo().page,"]]");if(!0===e.infoboxes&&(n+=this.infoboxes().map((function(t){return t.wikitext(e)})).join("\n")),!0===e.sections||!0===e.paragraphs||!0===e.sentences){var i=this.sections();i=i.filter((function(t){return"References"!==t.title()})),n+=i.map((function(t){return t.wikitext(e)})).join("\n")}return!0===e.references&&(n+="== References ==",n+=this.references().map((function(t){return t.wiki(e)})).join("\n")),!0===e.categories&&(n+="\n",this.categories().forEach((function(t){return n+="\n[[".concat(t,"]]")}))),n},n={},i={main:function(t){var e=t.list||[];return e=e.join("|"),"{{".concat(t.template,"|").concat(e,"}}\n")}},o=function(t){t=t||{},t=Object.assign({},n,t);var e="";if(this.title()){e+="\n".concat("=="," ").concat(this.title()," ").concat("==","\n")}return this.templates().forEach((function(t){i.hasOwnProperty(t.template)&&(e+=i[t.template](t))})),e+=this.paragraphs().map((function(e){return e.wikitext(t)})).join("\n")},r={},c=function(t){t=t||{},t=Object.assign({},r,t);var e="";return this.images().forEach((function(t){e+=t.wikitext()})),this.lists().forEach((function(t){e+=t.wikitext()})),e+=this.sentences().map((function(e){return e.wikitext(t)})).join("\n")};var a=function(t,e,n){if(!e||!t)return t;"number"==typeof t&&(t=String(t)),e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var i=new RegExp("\\b"+e+"\\b");return t=!0===i.test(t)?t.replace(i,n):t.replace(e,n)},s={links:!0},f=function(t){t=t||{},t=Object.assign({},s,t);var e=this.text();return!0===t.links&&this.links().forEach((function(t){var n=t.text()||t.page(),i=t.wikitext();e=a(e,n,i)})),!0===t.formatting&&(this.bold().forEach((function(t){e=a(e,t,"**"+t+"**")})),this.italic().forEach((function(t){e=a(e,t,"***"+t+"***")}))),e},u=function(){if(this.site())return this.text()?"[".concat(this.site(),"|").concat(this.text(),"]"):"[".concat(this.site(),"]");var t=this.page()||"";this.anchor()&&(t+="#".concat(this.anchor()));var e=this.text()||"";return e&&e.toLowerCase()!==t.toLowerCase()?"[[".concat(t,"|").concat(e,"]]"):"[[".concat(t,"]]")},h=function(){return"[[".concat(this.file(),"|thumb]]")},p=function(){var t=this,e="{{Infobox ".concat(this._type||"","\n");return Object.keys(this.data).forEach((function(n){var i=t.data[n];i&&(e+="| ".concat(n," = ").concat(i.wikitext()||"","\n"))})),e+="}}\n"},x=function(){var t="";return this.lines().forEach((function(e){t+="* ".concat(e.wikitext(),"\n")})),t},l=function(){return console.log(this),"<ref> </ref>"},k=function(){console.log(this);return"\n|}","{|\n\n|}"};return function(t){t.Doc.prototype.wikitext=e,t.Section.prototype.wikitext=o,t.Paragraph.prototype.wikitext=c,t.Sentence.prototype.wikitext=f,t.Link.prototype.wikitext=u,t.Image.prototype.wikitext=h,t.Infobox.prototype.wikitext=p,t.Table.prototype.wikitext=k,t.List.prototype.wikitext=x,t.Reference.prototype.wikitext=l}}));
