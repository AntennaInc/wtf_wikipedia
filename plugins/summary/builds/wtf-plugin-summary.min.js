!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("compromise")):"function"==typeof define&&define.amd?define(["compromise"],t):(e=e||self).wtf=t(e.compromise)}(this,(function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=function(e){var t,n=e.template("short description");return n&&((t=n)&&"[object Object]"===Object.prototype.toString.call(t))&&n.description?n.description:null},n=function(e,t){var n=e.clauses();return n.ifNo("#Copula"),n.length>1&&n.text().length>t.max&&n.pop(),n.join()},r=function(e){return e.has("#Noun and (a|an|the)")&&(e=e.remove("and .*")),e},o=function(e,t){e.remove("born in .*"),e.remove("(first|initially|originally)? (located|founded|started|based|formed) in .*"),e.remove("born #Date+ in? #Place+?"),e.remove("(which|who|that) (is|was) .*"),e.remove("^the name of"),e.remove("(located|situated|sited|found|discovered) (in|on) .*");var n=e.text(),r=.75*t.max;return n.length>r&&e.remove("in #Place+"),e},i=function(e,t){var n=e.text(),r=.8*t.max;return n.length>r&&(e.remove("#Demonym"),e.remove("(retired|former|professional|amateur)")),e},a=function(e){return e.remove("^(a|an|the)"),e},s=function(e,t){var n=e.text(),r=.7*t.max;return n.length>r&&(e.remove("^one of (the|many|several|#Value)+"),e.remove("^(a|an|the) #Ordinal? #Superlative"),e.remove("^(a|an|the) #Ordinal? most #Adjective")),e},u=function(e,t,n){return e.remove("^.+ #Copula+"),t.bolds().sort((function(e,t){return e.length>t.length?-1:1})).forEach((function(t){e=e.not(t)})),e=(e=e.not("^#Noun+ #Copula")).not("^".concat(n))};e.extend((function(e){e.prototype.pop=function(){return this.list.pop(),this}}));var c={max:90,min:8},l=function(t,l){l=l||{},l=Object.assign({},c,l);var m=t.sentences(0);if(!m)return"";var f=e(m.text()),h=t.title()||"";f.parentheses().remove(),f=u(f,m,h),(f=n(f,l)).post(""),f=r(f,l),f=o(f,l),f=i(f,l),f=s(f,l),!1===l.article&&(f=a(f));var p=f.trim().text();return!0===function(e,t){return!!(e&&e.length>t.min&&e.length<t.max)}(p,l)?p:""},m={article:!0};return function(n){n.Doc.prototype.summary=function(e){e=e||{},e=Object.assign({},m,e);var n=t(this);return function(e){return e&&e.length>5&&e.length<55}(n)?n.trim():l(this,e)},n.Doc.prototype.article=function(){var t="";return t=this.sentences(1)?this.sentences(1).text():this.sentences(0).text(),e(t).match("(#Pronoun|#Article)").eq(0).text().toLowerCase()||"it"},n.Doc.prototype.tense=function(){var t=this.sentence().text(),n=e(t);return n.match("#Copula+").first().has("was")||n.verbs(0).has("#PastTense")?"Past":n.has("will #Adverb? be")||n.has("(a|an) (upcoming|planned)")?"Future":"Present"}}}));
